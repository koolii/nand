# コンピュータ・アーキテクチャ

### プログラム内蔵方式
コンピュータは、ハードウェアのプラットフォーム上で一連の命令を実行することが出来る
プログラムのコードは、まるでデータのように、コンピュータのメモリに格納され操作される
（昔はハードウェアに物理的な結線によりロジックを実装したものがあったらしい）

### ノイマン型アーキテクチャ(コンピュータサイエンスの基本的枠組み)
現在の殆どのコンピュータがこれをベースにしている

* 万能チューリングマシン(universal Turing machine) - 抽象化された人工的な単純なコンピュータで、主にコンピュータシステムの理論的な側面を分析するために用いる
* ノイマン型コンピュータ(von Neuman machine) - 実用的なアーキテクチャ↓

ノイマン型コンピュータは中央演算装置を中心として
メモリデバイスを操作し、入力デバイスからデータを受け取り、出力デバイスへデータを送信する
大事なのはアーキテクチャはプログラム内蔵方式を採用していることで、
コンピュータのメモリに格納されるデータは、コンピュータが計算したデータだけでなく、コンピュータからの「命令」も含まれる

### メモリ
* データ項目
* プログラミング命令

両方共バイナリフォーマットで、どちらもRAMなので、アドレスから夫々アクセスする

#### データメモリ
高水準言語にあるような変数、配列、オブジェクト等のデータ形式を操作
読み込み・書き込みを行い、書き込みをすると古い値は上書きされる

#### 命令メモリ
高水準言語で書かれたコマンドが機械語に変換されると、バイナリのワードになる(=機械語の命令を表す)
CPUは命令の実行のたびに下記の手順を踏む

1. この命令メモリから命令を読み込み
1. 読み込んだ命令を解読（デコード）し
1. 命令を実行
1. 最後に次に実行すべき命令の場所を計算する(命令メモリの内容を変更すれば、全く別の操作をさせることが出来る)

### CPU
CPUの役割は現在読み込まれているプログラムの命令を実行すること(ALU、レジスタ、制御ユニットを用いる)

#### ALU
下位レベルの算術演算と論理演算

#### レジスタ
スピードの為に演算結果をレジスタに格納する

#### 制御ユニット
命令メモリに書いてあるような作業を制御ユニットが行なう(命令のデコード等)

### レジスタ
「メモリアドレスがjにあるデータを取得せよ」は

1. CPUからRAMのアドレス入力へjと言う値が送られる
1. RAMの「ダイレクトアクセス論理回路」は対象のメモリレジスタを選ぶ
1. RAM[J]のデータをCPUへ送る

この手続きがあるから、メモリのアクセスには時間が必要
だが、しかし、レジスタは一連の手続きを必要としない(レジスタもメモリと同じようにデータの取得格納をするのに)
さらに、メモリ間の往復とメモリ中の探索のために必要な時間はゼロ

大事なこと
* レジスタは物理的にCPU回路の中に存在している=>なのでアクセスする作業は一瞬でできる
* メモリとくらべてレジスタはとても数が少ない=>レジスタの指定が少しだけで特定できて、レジスタへの命令フォーマットを短くすることができる

使用方法
#### データレジスタ
簡易的なメモリの役割
例えば、`(a-b) * c`の`(a-b)`の結果を一時的にレジスタに保存するほうが、メモリより遥かに優れている

#### アドレスレジスタ
CPUは常にメモリにアクセスし、どの命令を行なうか等を決定するので、必ずアドレスを指定しなければならない
そのアドレスの指定は、現在の命令の中に含まれるかもしれないし、１つ前の命令の実行結果に依存しているかもしれない

アドレスレジスタは「１つ前の命令の実行結果に依存している」場合の実行結果を格納しておくためのレジスタ

#### プログラムカウンタレジスタ
CPUは次に実行されるアドレスを追う必要があって、このアドレスは「プログラムカウンタ（PC）」と言う特別なアドレスになる
現在の命令を実行する中でCPUはPCを更新を行い、次の命令を格納する

* 現在の命令に「goto」命令が含まれなければ、プログラムの次の命令を指すようにPCの値をインクリメント
* 現在の命令に「goto n」命令が含まれれば、CPUはPCにnを書き込む

### 入出力

今回は詳細なデバイスの分析は行わない

* 夫々のデバイスについての独自技術の知識が必要
* 全てのデバイスがコンピュータにとって全く同じ見えるような **メモリマップドI/O** があるから


メモリマップドI/Oの基本的なアイデアは、I/Oデバイスのための領域をメモリ上に割り当て、
I/OデバイスをCPUにとって通常のメモリ領域のように見せかけること

メモリマップドI/Oは非常に重要
CPUの設計をする上でI/Oデバイスのことを全く考える必要がなくなるから、だってベースのアドレスをCPUに
教えるだけであとはメモリなどを操作することで、I／Oデバイスを操作することができるから
